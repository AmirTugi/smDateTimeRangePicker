!function(){"use strict";function e(){return{restrict:"E",replace:!0,require:["^ngModel","smCalender"],scope:{initialDate:"@",minDate:"=",maxDate:"=",format:"@",mode:"@",startView:"@",startDay:"@",showDisplayHeader:"@"},controller:["$scope","$timeout",i],controllerAs:"vm",templateUrl:"picker/calender-date.html",link:function(e,t,a,i){var n=i[0],r=i[1];r.configureNgModel(n),e.$on("$destroy",function(){t.remove()})}}}function t(e,t,a,i){return{restrict:"E",replace:!0,scope:{value:"=",startDate:"@",weekStartDay:"@",startView:"@",mode:"@",format:"@",minDate:"@",maxDate:"@",fname:"@",lable:"@",isRequired:"@",disable:"=",form:"="},template:'  <md-input-container  >    <label for="{{fname}}">{{lable }}</label>    <input name="{{fname}}" ng-model="value"              type="text" placeholde="{{lable}}"             aria-label="{{fname}}" data-ng-required="isRequired"             ng-focus="show()" server-error class="gj-input-container">    <div ng-messages="form.fname.$error" ng-if="form[fname].$touched">    		<div ng-messages-include="{{ngMassagedTempaltePath}}"></div>    </div>    	<div id="picker" class="gj-calender-pane">     		<sm-date-picker               id="{{fname}}Picker"               ng-model="value" 				initial-date="{{value}}"              mode="{{mode}}"               start-view="{{startView}}"               data-min-date="minDate"               data-max-date="maxDate"                format="{{format}}"            	start-day="{{weekStartDay}}" > 			</sm-date-picker>    	</div>  </md-input-container>',link:function(n,r,o){function l(e,t){var a=460,i=296,n=e.top;if(e.top+a>t.bottom)var n=e.top-(e.top+a-(t.bottom-20));var r=e.left;return e.left+i>t.right&&(r=e.left-(e.left+i-(t.right-10))),{top:n,left:r}}var s=r[0].querySelector(".gj-input-container"),d=r[0].querySelector(".gj-calender-pane"),m=angular.element(d);n.ngMassagedTempaltePath=i.path,n.format=angular.isUndefined(n.format)?"MM-DD-YYYY":n.format,m.addClass("hide"),n.startDate=angular.isUndefined(n.value)?n.startDate:n.value,a.on("click",function(t){d===t.target||s===t.target||d.contains(t.target)||s.contains(t.target)||(m.removeClass("show").addClass("hide"),e.enableScrolling())}),angular.element(s).on("keydown",function(t){9===t.which&&(m.removeClass("show").addClass("hide"),angular.element(s).focus(),e.enableScrolling())}),n.show=function(){var a=s.getBoundingClientRect(),i=document.body.getBoundingClientRect();if(m.removeClass("hide"),t("sm")||t("xs"))d.style.left=(i.width-282)/2+"px",d.style.top=(i.height-450)/2+"px";else{var n=l(a,i);d.style.left=n.left+"px",d.style.top=n.top+"px"}document.body.appendChild(d),e.disableScrollAround(d),m.addClass("show")},n.$on("calender:close",function(){m.removeClass("show").addClass("hide"),d.parentNode.removeChild(d),e.enableScrolling()})}}}function a(){var e,t=" To ";return{setMassagePath:function(t){e=t},setDivider:function(e){t=e},$get:function(){return{path:e,divider:t}}}}var i=function(e,t){var a=this;a.$scope=e,a.$timeout=t,a.initialDate=e.initialDate,a.startDay=angular.isUndefined(e.startDay)||""===e.startDay?"Sunday":e.startDay,a.minDate=e.minDate,a.maxDate=e.maxDate,a.mode=angular.isUndefined(e.mode)?"DATE":e.mode,a.format=e.format,a.restrictToMinDate=angular.isUndefined(e.minDate)?!1:!0,a.restrictToMaxDate=angular.isUndefined(e.maxDate)?!1:!0,a.stopScrollPrevious=!1,a.stopScrollNext=!1,a.yearCells=[],a.monthCells=[],a.dateCellHeader=[],a.dateCells=[],a.hourCells=[],a.minuteCells=[],a.monthList=moment.months(),a.moveCalenderAnimation="",a.format=angular.isUndefined(a.format)?"MM-DD-YYYY":a.format,a.initialDate=angular.isUndefined(a.initialDate)?moment():moment(a.initialDate,a.format),a.currentDate=a.initialDate.clone(),a.restrictToMinDate&&(a.minDate=moment(a.minDate,a.format)),a.restrictToMaxDate&&(a.maxDate=moment(a.maxDate,a.format)),a.init(),e.$watch("vm.topIndex",angular.bind(this,function(e){var t=Math.floor(e/1);a.selectedYear=t}))};i.prototype.configureNgModel=function(e){this.ngModelCtrl=e;var t=this;e.$render=function(){t.ngModelCtrl.$viewValue=t.currentDate}},i.prototype.setNgModelValue=function(e){var t=this;t.ngModelCtrl.$setViewValue(e),t.ngModelCtrl.$render()},i.prototype.init=function(){var e=this;e.buildYearCells(),e.buildDateCells(),e.buildDateCellHeader(),e.buildMonthCells(),e.buidHourCells(),e.buidMinuteCells(),e.setView()},i.prototype.setView=function(){var e=this;switch(e.headerDispalyFormat="ddd, MMM DD",e.mode){case"date-time":e.view="DATE",e.headerDispalyFormat="ddd, MMM DD HH:mm";break;case"time":e.view="HOUR",e.headerDispalyFormat="HH:mm";break;default:e.view="DATE"}},i.prototype.buildYearCells=function(e){var t=this,a=t.initialDate.year()-25;angular.isUndefined(t.minDate)||(a=t.minDate.year());var i=a+25;angular.isUndefined(t.maxDate)||(i=t.maxDate.year());for(var n=a;i>=n;n++)t.yearCells.push(n)},i.prototype.buildMonthCells=function(){var e=this;e.monthCells=moment.months()},i.prototype.buildDateCells=function(){var e=this,t=e.initialDate.month(),a=e.initialDate.clone().date(0).day(e.startDay),i=!1,n=!1;angular.isUndefined(e.minDate)||(e.stopScrollPrevious=e.minDate.unix()>a.unix()),e.dateCells=[];for(var r=0;6>r;r++){for(var o=[],l=0;7>l;l++){var s=a.month()===t;n=s?!1:!0,!e.restrictToMinDate||angular.isUndefined(e.minDate)||n||(n=e.minDate.isAfter(a)),!e.restrictToMaxDate||angular.isUndefined(e.maxDate)||n||(n=e.maxDate.isBefore(a));var d={date:a.clone(),dayNum:s?a.date():"",month:a.month(),today:a.isSame(moment(),"day")&&a.isSame(moment(),"month"),year:a.year(),dayName:a.format("dddd"),isWeekEnd:i,isDisabledDate:n,isCurrentMonth:s};o.push(d),a.add(1,"d")}e.dateCells.push(o)}e.restrictToMaxDate&&!angular.isUndefined(e.maxDate)&&(e.stopScrollNext=e.maxDate.unix()<a.unix()),e.dateCells[0][6].isDisabledDate&&!e.dateCells[0][6].isCurrentMonth&&e.dateCells[0].splice(0)},i.prototype.buidHourCells=function(){for(var e=this,t=0;23>=t;t++){var a={hour:t,isCurrent:e.initialDate.hour()===t};e.hourCells.push(a)}},i.prototype.buidMinuteCells=function(){for(var e=this,t=0;59>=t;t++){var a={minute:t,isCurrent:e.initialDate.minute()===t};e.minuteCells.push(a)}},i.prototype.changePeriod=function(e){var t=this;if("p"===e){if(t.stopScrollPrevious)return;t.moveCalenderAnimation="slideLeft",t.initialDate.subtract(1,"M")}else{if(t.stopScrollNext)return;t.moveCalenderAnimation="slideRight",t.initialDate.add(1,"M")}t.buildDateCells(),t.$timeout(function(){t.moveCalenderAnimation=""},500)},i.prototype.selectDate=function(e,t){var a=this;t||(a.currentDate=e,a.setNgModelValue(e.format(a.format)),a.$scope.$emit("calender:date-selected"))},i.prototype.buildDateCellHeader=function(e){var t=this,a={sunday:{shortName:"Su",fullName:"Sunday",single:"S"},monday:{shortName:"Mo",fullName:"MonDay",single:"M"},tuesday:{shortName:"Tu",fullName:"TuesDay",single:"T"},wednesday:{shortName:"We",fullName:"Wednesday",single:"W"},thursday:{shortName:"Th",fullName:"Thursday",single:"T"},friday:{shortName:"Fr",fullName:"Friday",single:"F"},saturday:{shortName:"Sa",fullName:"Saturday",single:"S"}},i=[];for(var n in a)i.push(n);var r=moment().day(t.startDay).day(),o=0;for(var n in a)t.dateCellHeader.push(a[i[(o+r)%i.length]]),o++},i.prototype.changeView=function(e){var t=this;t.view=e},i.prototype.changeYear=function(e){var t=this;t.initialDate.year(e),t.buildDateCells(),t.view="DATE"},i.prototype.setHour=function(e){var t=this;t.currentDate.hour(e)},i.prototype.setMinute=function(e){var t=this;t.currentDate.minute(e)},i.prototype.selectedDateTime=function(){var e=this;e.setNgModelValue(e.currentDate.format(e.format)),"time"===e.mode?e.view="HOUR":e.view="DATE",e.$scope.$emit("calender:close")},i.prototype.closeDateTime=function(){var e=this;"time"===e.mode?e.view="HOUR":e.view="DATE",e.$scope.$emit("calender:close")};var n=angular.module("dateTimePicker");n.directive("smCalender",["$timeout",e]),n.directive("smDateTimePicker",["$mdUtil","$mdMedia","$document","picker",t]),n.provider("picker",[a])}();